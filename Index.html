<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sanctified.church - Virtual Church</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Mobile-friendly -->
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-keyboard-controls@1.0.0/dist/aframe-keyboard-controls.min.js"></script>
</head>
<body>
  <a-scene embedded cursor="rayOrigin: mouse" background="color: #87CEEB" environment="preset: default; lightPosition: 1 5 1" vr-mode-ui="enabled: true"> <!-- VR entry point -->

    <!-- Camera with keyboard nav (arrow keys/WASD) -->
    <a-camera id="camera" position="0 1.6 0" look-controls wasd-controls="acceleration: 50" keyboard-controls></a-camera>

    <!-- Church Model (upload your GLTF to /assets/ and update path) -->
    <a-entity gltf-model="url(assets/church.gltf)" position="0 0 -10" scale="1 1 1" rotation="0 0 0"></a-entity>

    <!-- Gold Cross on Steeple -->
    <a-entity gltf-model="url(assets/gold-cross.gltf)" position="0 15 -10" scale="2 2 2" material="color: gold; shader: standard"></a-entity>
    <!-- Sparkle effect (add later: <a-entity particle-system="particleCount: 100; color: #FFD700,#FFFFFF; velocity: 0 0.1 0"></a-entity>) -->

    <!-- Parking Lot Sign -->
    <a-text value="Welcome to\nSanctified.church" position="-2 2 -8" color="black" align="center" width="4" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000" geometry="primitive: plane; width: 4; height: 2"></a-text>

    <!-- Entrance Door to Sanctuary -->
    <a-plane id="door" position="0 1 -5" rotation="-90 0 0" width="3" height="4" color="#8B4513" event-set__enter="_event: click; _target: #sanctuary; visible: true" 
             animation__fade="property: material.opacity; startEvents: click; from: 1; to: 0; dur: 500">
      <a-text value="Sanctuary" position="0 0 0.1" color="white" align="center"></a-text>
    </a-plane>
    <a-entity id="sanctuary" visible="false" position="0 0 -5"> <!-- Loads on door click -->
      <a-box position="0 0 0" width="20" height="10" depth="20" color="#F5F5DC"></a-box> <!-- Gothic room placeholder -->
      <a-sound src="url(assets/organ.mp3)" autoplay="true" loop="true" volume="0.3" position="0 5 0"></a-sound> <!-- Organ music -->
      <!-- Add pews, altar, etc., here next -->
    </a-entity>

    <!-- Bibles on Stands -->
    <a-cylinder position="-1 0.5 -3" radius="0.2" height="1" color="brown"></a-cylinder>
    <a-box position="-1 1.2 -3" width="0.5" height="0.3" depth="0.2" color="black"></a-box>

    <!-- Bottom-Right Menu HUD -->
    <a-plane position="1.5 -0.5 -1" rotation="-30 0 0" width="2" height="1.5" color="rgba(0,0,0,0.5)">
      <a-text value="Menu\n• Traditional Site\n• Road Journey\n• Sanctuary\n• Sunday School" position="0 0 0.1" color="white" align="left" line-height="50"></a-text>
    </a-plane>

    <!-- Sensor Light -->
    <a-light type="ambient" intensity="0.2" position="0 3 -4"></a-light>
    <a-light type="point" intensity="0" id="sensor-light" position="0 3 -4" distance="5" color="yellow"></a-light>

    <!-- Ground -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="50" height="50" color="#90EE90" repeat="50 50"></a-plane>

  </a-scene>

  <script>
    // Sensor light proximity (basic)
    setInterval(() => {
      const camPos = document.querySelector('#camera').getAttribute('position');
      const light = document.querySelector('#sensor-light');
      const dist = Math.sqrt(camPos.x**2 + (camPos.y-3)**2 + (camPos.z+4)**2);
      light.setAttribute('intensity', dist < 3 ? 1 : 0);
    }, 100);

    // Door click
    document.querySelector('#door').addEventListener('click', () => {
      document.querySelector('#sanctuary').setAttribute('visible', true);
    });

    // Menu: Traditional site link (update URL)
    document.querySelector('a-text').addEventListener('click', (e) => {
      if (e.target.components.text.data.includes('Traditional Site')) {
        window.open('https://your-old-site-url.com', '_blank'); // Replace with your current site
      }
    });
  </script>
</body>
</html>
